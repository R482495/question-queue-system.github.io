
<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="ja">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>質問順番待ちシステム</title>
</head>

<body>
    <h1>質問順番待ちシステム</h1>

    <!-- Form to add a new question -->
    <form method="post">
        <label for="name">名前:</label>
        <input type="text" id="name" name="name" required><br><br>
        <label for="seat">座席:</label>
        <input type="text" id="seat" name="seat" required><br><br>
        <button type="submit">質問する</button>
    </form>

    <!-- Display of question queue -->
    <h2>質問順番</h2>
    <table>
        <thead>
            <tr>
                <th>名前</th>
                <th>座席</th>
                <th>状態</th>
            </tr>
        </thead>
        <tbody>
            <?php
            $file = 'questions.txt';

            // フォームから送信されたデータをファイルに追記する
            if ($_SERVER["REQUEST_METHOD"] == "POST") {
                $name = $_POST['name'] ?? '';
                $seat = $_POST['seat'] ?? '';
                $status = "対応待ち";
                $data = "$name,$seat,$status\n";
                file_put_contents($file, $data, FILE_APPEND);
            }

            // ファイルからデータを読み取り、表示する
            $data = file($file, FILE_IGNORE_NEW_LINES);
            foreach ($data as $line) {
                $question = explode(',', $line);
                echo "<tr>";
                echo "<td>" . $question[0] . "</td>";
                echo "<td>" . $question[1] . "</td>";
                echo "<td>" . $question[2] . "</td>";
                echo "</tr>";
            }
            ?>
        </tbody>
    </table>
</body>

</html>
